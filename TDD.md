# TDD

## Test list

### `JavaCodeGeneratorTest` — new method `generate(Aggregate, Command, Event)`

- [x] `generate(aggregate, command, event)` returns 2 artifacts (service interface, service
  implementation)
- [x] Service interface (1st artifact):
  - `actual.getName()` equals `"ProjectsService"`
  - `actual.getPackage()` equals `"com.company.project.domain.services"`
  - Code contains `public interface ProjectsService`
  - Code contains `import com.company.project.domain.model.CreateProject;`
  - Code contains `import com.company.project.domain.model.ProjectCreated;`
  - Code contains `ProjectCreated accept(CreateProject createProject);`
- [x] Service implementation (2nd artifact):
  - `actual.getName()` equals `"ProjectsServiceImpl"`O
  - `actual.getPackage()` equals `"com.company.project.domain.services"`
  - Code contains `class ProjectsServiceImpl implements ProjectsService` (no `public`)
  - Code contains import for the command type
  - Code contains import for the event type
  - Code contains `public ProjectCreated accept(CreateProject createProject) {}`

### `AggregateToolTest` — new tool

- [x] Warn about missing domain service when aggregate has an acceptance test with an aggregate
  scenario and no service code exists:
  - Diagnostic level: WARN
  - Diagnostic message: `"Missing domain service"`
  - Suggestion message: `"Generate domain service"`
- [x] No warning when domain service code already exists
- [x] Applying the suggestion creates code artifacts generated by the `CodeGenerator`

### `JavaUnitTestGeneratorTest` — update service field to use implementation class

- [x] Generated unit test field for aggregate scenario uses implementation class:
  `private final NotificationsService service = new NotificationsServiceImpl();`
  Make sure to add an import statement for the implementation class.
  — update `shouldGenerateUnitTestFromAggregateScenario`
- [x] Same for policy scenario: `new SendNotificationServiceImpl()`
  — update `shouldGenerateUnitTestFromPolicyScenario`
- [~] Same for read model scenario: `new NotificationListServiceImpl()`
  — update `shouldGenerateUnitTestFromReadModelScenario`
